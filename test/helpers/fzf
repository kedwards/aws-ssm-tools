#!/usr/bin/env bash
set -euo pipefail

case "${FAKE_FZF_MODE:-select}" in
  select)
    IFS= read -r line || exit 0
    printf '%s\n' "$line"
    ;;
  multi)
    # Select first two items
    IFS= read -r a || exit 0
    IFS= read -r b || true
    printf '%s\n' "$a"
    [[ -n "$b" ]] && printf '%s\n' "$b"
    ;;
  cancel)
    exit 130
    ;;
  *)
    echo "fake fzf: unknown mode '$FAKE_FZF_MODE'" >&2
    exit 1
    ;;
esac
